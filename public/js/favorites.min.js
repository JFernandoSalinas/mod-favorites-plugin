!function(t,i){t.wp=t.wp||{};var a=t.document,o=t.jQuery,e=t.wp,n=o(a);astoundifyFavorites.toggleListField=function(t){"new"===t.val()?t.siblings(".astoundify_favorites_list_new").show():t.siblings(".astoundify_favorites_list_new").hide()},astoundifyFavorites.openPopUp=function(t){t&&o.magnificPopup.open({items:{src:astoundifyFavorites.config.popupHtml.replace("%%CONTENT%%",t),type:"inline"}})},astoundifyFavorites.closePopUp=function(){o.magnificPopup.close()},astoundifyFavorites.favoriteCreate=function(t){e.ajax.post("astoundify_favorites_favorite_create",t.data()).done(function(i){if(i.link){var a=o('.astoundify-favorites-link[data-af_data="'+t.data("af_data")+'"][data-af_type="'+t.data("af_type")+'"]'),e=o(i.link),n=(a[0].attributes,e[0].attributes);o.each(n,function(t,i){a.attr(i.name,i.value)}),setTimeout(function(){a.html(e.html())},300)}}).fail(function(t){astoundifyFavorites.openPopUp(t.notices)})},astoundifyFavorites.favoriteEditForm=function(t){var i={};o.each(t[0].attributes,function(t,a){i[a.name.replace("data-","")]=a.value}),e.ajax.post("astoundify_favorites_favorite_edit_form",i).done(function(t){astoundifyFavorites.openPopUp(t.form)}).fail(function(i){i.link&&o('.astoundify-favorites-link[data-af_data="'+t.data("af_data")+'"][data-af_type="'+t.data("af_type")+'"]').replaceWith(o(i.link)),o("#astoundify-favorite-"+t.data("af_favorite_id")).remove(),astoundifyFavorites.openPopUp(i.notices)})},astoundifyFavorites.favoriteEdit=function(t){var i=new FormData(t[0]);i.append("action","astoundify_favorites_favorite_edit"),e.ajax.send({dataType:"json",data:i,contentType:!1,processData:!1}).done(function(t){t.template&&o("#astoundify-favorite-"+t.favorite_id).replaceWith(t.template),astoundifyFavorites.openPopUp(t.notices)}).fail(function(t){astoundifyFavorites.openPopUp(t.notices)})},astoundifyFavorites.favoriteRemove=function(t){e.ajax.post("astoundify_favorites_favorite_remove",t.data()).done(function(i){i.link&&o('.astoundify-favorites-link[data-af_data="'+i.target_id+'"][data-af_type="'+t.data("af_type")+'"]').replaceWith(o(i.link)),o("#astoundify-favorite-"+i.favorite_id).remove(),astoundifyFavorites.closePopUp()}).fail(function(i){o("#astoundify-favorite-"+t.data("af_favorite_id")).remove(),astoundifyFavorites.openPopUp(i.notices)}),o(".astoundify-favorite").length||o("#astoundify-favorite-0").show()},astoundifyFavorites.listCreateForm=function(t){e.ajax.post("astoundify_favorites_list_create_form",t.data()).done(function(t){astoundifyFavorites.openPopUp(t.form)}).fail(function(t){astoundifyFavorites.openPopUp(t.notices)})},astoundifyFavorites.listEditForm=function(t){e.ajax.post("astoundify_favorites_list_edit_form",t.data()).done(function(t){astoundifyFavorites.openPopUp(t.form)}).fail(function(i){o("#astoundify-favorite-list-"+t.data("af_list_id")).remove(),astoundifyFavorites.openPopUp(i.notices)})},astoundifyFavorites.listCreate=function(t){var i=new FormData(t[0]);i.append("action","astoundify_favorites_list_create"),i.append("list_name",t.find('input[name="list_name"]').val()),e.ajax.send({dataType:"json",data:i,contentType:!1,processData:!1}).done(function(t){t.template&&o(t.template).insertBefore("#astoundify-favorite-list-new"),astoundifyFavorites.openPopUp(t.notices)}).fail(function(t){astoundifyFavorites.openPopUp(t.notices)})},astoundifyFavorites.listEdit=function(t){var i=new FormData(t[0]);i.append("action","astoundify_favorites_list_edit"),i.append("list_name",t.find('input[name="list_name"]').val()),e.ajax.send({dataType:"json",data:i,contentType:!1,processData:!1}).done(function(t){t.template&&o("#astoundify-favorite-list-"+t.list_id).replaceWith(t.template),astoundifyFavorites.openPopUp(t.notices)}).fail(function(t){astoundifyFavorites.openPopUp(t.notices)})},astoundifyFavorites.listRemove=function(t){e.ajax.post("astoundify_favorites_list_remove",t.data()).done(function(t){o("#astoundify-favorite-list-"+t.list_id).remove(),astoundifyFavorites.openPopUp(t.notices)}).fail(function(t){astoundifyFavorites.openPopUp(t.notices)})},n.ready(function(){n.on("click",".astoundify-favorites-link.astoundify-favorites-link--inactive",function(t){if(0!==o(this).data("user_id"))return t.preventDefault(),void astoundifyFavorites.favoriteCreate(o(this))}),n.on("click",".astoundify-favorites-link.astoundify-favorites-link--active, .astoundify-favorites-edit-favorite",function(t){t.preventDefault(),astoundifyFavorites.favoriteEditForm(o(this))}),n.on("submit",".astoundify-favorites-form-favorite-edit",function(t){t.preventDefault(),astoundifyFavorites.favoriteEdit(o(this))}),n.on("click",".astoundify-favorites-remove-favorite",function(i){i.preventDefault(),!0===t.confirm(astoundifyFavorites.i18n.confirmRemove)&&astoundifyFavorites.favoriteRemove(o(this))}),n.on("click",".astoundify-favorites-create-list",function(t){t.preventDefault(),astoundifyFavorites.listCreateForm(o(this))}),n.on("click",".astoundify-favorites-edit-list",function(t){t.preventDefault(),astoundifyFavorites.listEditForm(o(this))}),n.on("submit",".astoundify-favorites-form-list-edit",function(t){t.preventDefault(),"0"===o(this).find('input[name="_list"]').val()?astoundifyFavorites.listCreate(o(this)):astoundifyFavorites.listEdit(o(this))}),n.on("click",".astoundify-favorites-remove-list",function(i){i.preventDefault(),!0===t.confirm(astoundifyFavorites.i18n.confirmRemove)&&astoundifyFavorites.listRemove(o(this))}),n.on("change",".astoundify_favorites_list",function(){astoundifyFavorites.toggleListField(o(this))})})}(window);
//# sourceMappingURL=favorites.min.js.map
